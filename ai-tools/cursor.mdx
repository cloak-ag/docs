---
title: "Cursor setup"
description: "Prompt and rules setup for Cloak v2 (note + UTXO APIs)"
icon: "arrow-pointer"
---

Use Cursor rules that reflect the current SDK surface.

## Project rules

Create `.cursor/rules.md` in your app root:

<Accordion title="View .cursor/rules.md template">

# Cloak SDK v2 Rules

This project uses `@cloak.ag/sdk` for private Solana transactions.

## API surfaces

1. Note API (`CloakSDK`): `deposit`, `withdraw`, `send`, `swap`
2. UTXO API (top-level): `transact`, `transfer`, `partialWithdraw`, `fullWithdraw`, `swapUtxo`, `swapWithChange`

## Security constraints

- Never log full note or UTXO secret material.
- Always persist note data in `onNoteGenerated` before deposit proceeds.
- Treat notes as spending secrets.

## Program IDs

- Mainnet constant: `c1oak6tetxYnNfvXKFkpn1d98FxtK7B68vBQLYQpWKp`
- Development build ID: `3EvH6XYQir7D2RyzCdP7QFmJFfSPfdeoB8VnpLdEF4Kr`

Set `programId` explicitly on development deployments.

## Fees

- Fixed: `5_000_000`
- Variable: `amount * 3 / 1000`
- Min deposit: `10_000_000`

## Error handling

Use `CloakError`, `ShieldPoolErrors`, and `isRootNotFoundError`.
Retry transient errors with backoff.

## References

- `/sdk/quickstart`
- `/sdk/utxo-transactions`
- `/sdk/migration-v1-v2`
- `/sdk/api-reference`
- `/services/relay-api`

</Accordion>

## Prompt examples

<AccordionGroup>
<Accordion title="React wallet + note flow">
Build a React hook using wallet-adapter and CloakSDK note flows (`deposit`, `withdraw`) with secure note persistence and progress callbacks.
</Accordion>

<Accordion title="UTXO transfer flow">
Implement a UTXO transfer flow using `transact`/`transfer` with bigint amounts, relay status polling, and stale-root retries.
</Accordion>

<Accordion title="Migration task">
Refactor this note-only integration so swap and partial withdraw use UTXO helpers while keeping existing deposit UX.
</Accordion>
</AccordionGroup>

## Recommended links for context

- [Quickstart](/sdk/quickstart)
- [UTXO Transactions](/sdk/utxo-transactions)
- [Migration v1 â†’ v2](/sdk/migration-v1-v2)
