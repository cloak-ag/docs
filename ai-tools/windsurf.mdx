---
title: "Windsurf setup"
description: "Rules and prompts for Cloak v2 development"
icon: "wind"
---

Configure Windsurf with current Cloak APIs and constraints.

## Rule file

Create `.windsurf/rules.md`:

<Accordion title="View .windsurf/rules.md template">

# Cloak SDK v2 Rules

Project uses `@cloak.ag/sdk` for private Solana transactions.

## API surfaces

- Note API (`CloakSDK`)
- UTXO API (`transact`, `transfer`, `partialWithdraw`, `fullWithdraw`, `swapUtxo`, `swapWithChange`)

## Security

- Do not log note or UTXO secrets.
- Persist generated notes in `onNoteGenerated` before deposit execution.

## Deployment constants

- Mainnet constant: `c1oak6tetxYnNfvXKFkpn1d98FxtK7B68vBQLYQpWKp`
- Development build: `3EvH6XYQir7D2RyzCdP7QFmJFfSPfdeoB8VnpLdEF4Kr`

## Fee constants

- `FIXED_FEE_LAMPORTS = 5_000_000`
- Variable fee `amount * 3 / 1000`
- `MIN_DEPOSIT_LAMPORTS = 10_000_000`

## Errors

Use `CloakError`, `ShieldPoolErrors`, `parseError`, and `isRootNotFoundError`.

## Documentation links

- `/sdk/quickstart`
- `/sdk/utxo-transactions`
- `/sdk/migration-v1-v2`
- `/protocol/shield-pool`
- `/services/relay-api`

</Accordion>

## Prompt examples

<AccordionGroup>
<Accordion title="Wallet + CloakSDK">
Generate a wallet-adapter integration with CloakSDK note-based operations, progress callbacks, and safe note storage.
</Accordion>

<Accordion title="UTXO + relay">
Implement an end-to-end UTXO flow with `transact` and `swapUtxo`, including `/status/:id` polling and retry for stale roots.
</Accordion>

<Accordion title="v1 to v2 migration">
Refactor this code from note-only transfers to UTXO transaction helpers while keeping API compatibility at the UI layer.
</Accordion>
</AccordionGroup>

## Related docs

- [Quickstart](/sdk/quickstart)
- [UTXO Transactions](/sdk/utxo-transactions)
- [Migration v1 â†’ v2](/sdk/migration-v1-v2)
